<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>STERLA</title>
<style>
/* ====== GLOBAL THEME ====== */
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family: "Poppins", sans-serif;
}
body{
  background:linear-gradient(135deg,#d9e6ff,#ffffff);
  overflow-x:hidden;
  font-size:16px;
}

/* ====== LOGIN PAGE ====== */
#loginPage{
  width:100vw; height:100vh;
  display:flex; justify-content:center; align-items:center;
  padding:30px;
}
.login-container{
  width:80%; height:80%;
  background:rgba(255,255,255,0.4);
  backdrop-filter:blur(15px);
  border-radius:25px;
  display:flex;
  box-shadow:0 8px 20px rgba(0,0,0,0.15);
}
.login-left{
  flex:1; background:#e8f0ff;
  border-radius:25px 0 0 25px;
  padding:40px;
  display:flex; flex-direction:column;
  justify-content:center; align-items:center;
  position:relative; overflow:hidden;
}
.doodle{
  position:absolute; opacity:0.15; width:140px;
}
#pencil{top:20px; left:30px; transform:rotate(-15deg);}
#book{bottom:30px; right:40px; transform:rotate(10deg);}
#star{top:40%; left:45%;}
.logo-title{
  font-size:48px; font-weight:800;
  color:#2b4b9b; text-shadow:0 2px 6px rgba(0,0,0,0.15);
}
.logo-sub{
  font-size:20px; color:#5370c9;
  margin-top:10px; text-align:center;
}
.login-right{
  flex:1; padding:50px;
  display:flex; flex-direction:column;
  justify-content:center;
}
.login-right h2{
  font-size:32px; font-weight:700;
  color:#2b4b9b; margin-bottom:20px;
}
.inputBox{
  margin:15px 0;
}
.inputBox input, .inputBox select{
  width:100%; padding:15px;
  border-radius:12px; border:1px solid #9bb2ff;
  background:rgba(255,255,255,0.6);
}
#loginBtn{
  margin-top:20px; width:100%; padding:16px;
  border:none; border-radius:12px;
  font-size:18px; background:#2b4b9b;
  color:white; cursor:pointer; transition:0.3s;
}
#loginBtn:hover{ background:#1d3270; }

/* ====== APP LAYOUT ====== */
#appPage{ display:none; width:100%; height:100%; display:flex; }
.glass{
  background:rgba(255,255,255,0.35);
  backdrop-filter:blur(12px);
  border-radius:18px;
  border:1px solid rgba(255,255,255,0.4);
  box-shadow:0 4px 20px rgba(0,0,0,0.1);
}
#sidebar{
  width:260px; height:100vh;
  background:#1346b5c4; color:white;
  padding:25px; position:fixed;
}
#sidebar h2{
  font-size:26px; margin-bottom:25px;
}
.nav-btn{
  width:100%; padding:12px; margin:8px 0;
  background:rgba(255,255,255,0.2); border:none;
  border-radius:12px; text-align:left;
  color:white; cursor:pointer; font-size:16px;
  transition:0.3s;
}
.nav-btn:hover{ background:rgba(255,255,255,0.35); }
#main{
  margin-left:280px; padding:30px;
  width:calc(100% - 280px);
}
.page{ display:none; }
.active{ display:block; }
#welcomeBox{
  width:90%; padding:30px;
  margin-top:25px;
  display:flex; align-items:center;
  justify-content:space-between;
}
#welcomeBox img{
  width:160px; filter: invert(25%);
}
.subject-card{
  padding:18px; margin:12px; background:white;
  border-radius:15px; display:inline-block;
  cursor:pointer; width:150px; text-align:center;
  border:2px solid #1346b5; transition:0.3s;
}
.subject-card:hover{
  background:#1346b5; color:white;
}
.topic-btn{
  padding:12px; border-radius:12px;
  background:#1346b5; color:white; border:none;
  margin:5px; cursor:pointer;
}
.output-box{
  margin-top:20px; padding:25px;
  border-radius:15px; background:white;
  min-height:200px;
}
.announce{
  background:white; padding:12px;
  border-radius:12px; margin:10px 0;
}

/* --- New styles for Mind Map Bubbles --- */
.mm-bubble-container {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  justify-content: center;
  align-items: center;
  padding: 20px;
}
.mm-bubble {
  background: #2b4b9b;
  color: white;
  padding: 15px 25px;
  border-radius: 50px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  text-align: center;
  font-weight: 500;
  transition: transform 0.2s, background 0.3s;
  max-width: 250px;
}
.mm-bubble:nth-child(even) {
  background: #5370c9;
}
.mm-bubble:nth-child(3n) {
  background: #1d3270;
}
.mm-bubble:hover {
  transform: translateY(-5px);
}
#mmOutput h3 {
  text-align: center;
  color: #2b4b9b;
  margin-bottom: 20px;
}


/* --- New styles for Quiz --- */
.quiz-question {
  margin-bottom: 20px;
  border-bottom: 1px solid #eee;
  padding-bottom: 15px;
}
.quiz-question p {
  font-weight: bold;
  margin-bottom: 10px;
  color: #2b4b9b;
}
.quiz-question label {
  display: block;
  margin: 5px 0;
  padding: 8px;
  border-radius: 8px;
  cursor: pointer;
  transition: background-color 0.2s;
  border: 1px solid transparent;
}
.quiz-question label.correct {
  background-color: #e6ffe6;
  border-color: #4CAF50;
}
.quiz-question label.incorrect {
  background-color: #ffe6e6;
  border-color: #F44336;
}
.quiz-question label:not(.correct):not(.incorrect):hover {
  background-color: #f0f8ff;
}
input[type="radio"] {
  margin-right: 8px;
}
#submitQuizBtn {
  margin-top: 20px;
  padding: 12px 25px;
  border: none;
  border-radius: 12px;
  background: #4CAF50;
  color: white;
  font-size: 16px;
  cursor: pointer;
}
#quizResult {
  margin-top: 15px;
  font-weight: bold;
  color: #1d3270;
}

/* --- New styles for AI Chat --- */
.ai-message {
  padding: 10px;
  margin-bottom: 10px;
  border-radius: 10px;
  background-color: #e8f0ff;
}
.user-message {
  background-color: #ffe8e8;
  text-align: right;
  margin-left: 20%;
}
.ai-message ul {
  padding-left: 20px;
  margin-top: 10px;
}

/* Hidden for teacher-only features: base hidden then shown via JS */
.teacher-only { display: none; }
</style>
</head>
<body>

<div id="loginPage">
  <div class="login-container">
    <div class="login-left">
      <img src="https://cdn-icons-png.flaticon.com/512/2942/2942789.png" class="doodle" id="pencil">
      <img src="https://cdn-icons-png.flaticon.com/512/2232/2232688.png" class="doodle" id="book">
      <img src="https://cdn-icons-png.flaticon.com/512/1828/1828884.png" class="doodle" id="star">
      <div class="logo-title">STERLA</div>
      <div class="logo-sub">Your All-in-One Smart School Companion</div>
    </div>

    <div class="login-right">
      <h2>Login</h2>
      <div class="inputBox">
        <input type="text" id="username" placeholder="Enter your name" />
      </div>
      <div class="inputBox">
        <button id="studentLogin" style="padding: 10px; width: 48%; margin-right: 2%;">Login as Student</button>
        <button id="teacherLogin" style="padding: 10px; width: 48%;">Login as Teacher</button>
      </div>
    </div>
  </div>
</div>

<div id="appPage">
  <div id="sidebar">
    <h2>STERLA</h2>
    <button class="nav-btn" onclick="showPage('homePage')">üè† Home</button>
    <button class="nav-btn" onclick="showPage('dashboard')">üì¢ Dashboard</button>
    <button class="nav-btn" onclick="showPage('subjectsPage')">üìò Subjects</button>
    <button class="nav-btn" onclick="showPage('mmPage')">üß† Mind Map</button>
    <button class="nav-btn" onclick="showPage('quizPage')">üìù Quiz</button>
    <button class="nav-btn" onclick="showPage('wsPage')">üìÑ Worksheet</button>
    <button class="nav-btn teacher-only" onclick="showPage('managePage')">‚öôÔ∏è Teacher Panel</button>
    <button class="nav-btn" onclick="showPage('aiChatPage')">ü§ñ AI Chat</button>
  </div>

  <div id="main">

    <div id="homePage" class="page active">
      <h1 id="welcomeUser"></h1>
      <div id="welcomeBox" class="glass">
        <div>
          <h2>Your learning companion</h2>
          <p>Choose a subject ‚Üí pick a topic ‚Üí get mindmap / quiz / worksheet!</p>
        </div>
        <img src="https://cdn-icons-png.flaticon.com/512/2942/2942943.png" alt="school icon">
      </div>
    </div>

    <div id="dashboard" class="page">
      <h1>Dashboard</h1>
      <h2>Announcements</h2>
      <div class="announce">‚Ä¢ Chemistry worksheet due Monday</div>
      <div class="announce">‚Ä¢ Biology test next Friday</div>
      <div class="announce">‚Ä¢ Math homework submission closes tonight</div>
    </div>

    <div id="subjectsPage" class="page">
      <h1>Select a Subject</h1>
      <div id="subjectsContainer"></div>
    </div>

    <div id="topicPage" class="page">
      <h1 id="topicTitle"></h1>
      <div id="topicButtons"></div>
    </div>

    <div id="mmPage" class="page">
      <h1>Mind Map</h1>
      <div class="output-box" id="mmOutput"></div>
    </div>

    <div id="quizPage" class="page">
      <h1>Quiz on <span id="quizTopicTitle"></span></h1>
      <div class="output-box" id="quizOutput">
        </div>
    </div>

    <div id="wsPage" class="page">
      <h1>Worksheet</h1>
      <div class="output-box" id="wsOutput"></div>
    </div>

    <div id="managePage" class="page teacher-only">
      <h1>Teacher Panel</h1>
      <p>Here you can upload worksheets, add quizzes, view submissions, manage announcements.</p>
    </div>

    <div id="aiChatPage" class="page">
      <h1>ü§ñ AI Chat Assistant</h1>
      <p>Ask a question about the selected topic: <span id="chatTopicDisplay" style="font-weight:bold; color:#1346b5;">(No Topic Selected)</span></p>

      <div class="output-box" id="aiChatOutput" style="height:450px; overflow-y:auto; padding: 15px;">
        <div class="ai-message">Hi there! Select a topic in the **Subjects** tab to start learning.</div>
      </div>

      <div style="display:flex; margin-top:15px;">
        <input type="text" id="userInput" placeholder="Type your question..." style="flex-grow:1; padding:12px; border-radius:12px 0 0 12px; border:1px solid #ccc;" />
        <button id="sendBtn" style="padding:12px 20px; border:none; border-radius:0 12px 12px 0; background:#2b4b9b; color:white; cursor:pointer;">Send</button>
      </div>
    </div>

  </div>
</div>

<script>
/* ================= LOGIN HANDLING ================= */
const studentLoginBtn = document.getElementById("studentLogin");
const teacherLoginBtn = document.getElementById("teacherLogin");

studentLoginBtn.onclick = () => doLogin("student");
teacherLoginBtn.onclick = () => doLogin("teacher");

function doLogin(role){
  const name = document.getElementById("username").value.trim();
  if(!name){ alert("Name is required"); return; }
  localStorage.setItem("sterlaUser", name);
  localStorage.setItem("sterlaRole", role);
  document.getElementById("loginPage").style.display = "none";
  document.getElementById("appPage").style.display = "flex";
  document.getElementById("welcomeUser").innerText = "Welcome, " + name + " üëã";

  if(role === "teacher"){
    document.querySelectorAll(".teacher-only").forEach(el => el.style.display = "block");
  }
}

/* ================= CONTENT DATA ================= */
const subjectTopics = {
  "English": ["Grammar", "Formal Letter", "Speech", "Prose"],
  "Math": ["Algebra", "Linear Equations", "Mensuration"],
  "Science": ["Reproduction in Animals", "Sound", "Electricity"],
  "Social Science": ["1857 Revolt", "Resources", "Judiciary"],
  "Hindi": ["Vyakaran", "Patra Lekhan"],
  "Computer": ["HTML", "AI Basics"],
  "Sanskrit": ["Shabd Roop", "Dhatu Roop"],
  "French": ["French Grammar", "Culture"]
};

let chosenTopic = "";

/* ===================== UI NAVIGATION ===================== */
function showPage(p){
  document.querySelectorAll(".page").forEach(pg => pg.classList.remove("active"));
  document.getElementById(p).classList.add("active");
  if(p === "mmPage") loadMindmap();
  if(p === "quizPage") loadQuiz();
  if(p === "wsPage") loadWorksheet();
  if(p === "aiChatPage") setupAIChat();
}

/* ===================== LOAD SUBJECTS ===================== */
function loadSubjects(){
  const box = document.getElementById("subjectsContainer");
  box.innerHTML = "";
  for(const sub in subjectTopics){
    box.innerHTML += `<div class="subject-card" onclick="selectSubject('${sub}')">${sub}</div>`;
  }
}
loadSubjects();

function selectSubject(sub){
  showPage("topicPage");
  document.getElementById("topicTitle").innerText = sub + " Topics";
  const topics = subjectTopics[sub];
  let btns = "";
  topics.forEach(tp => {
    btns += `<button class="topic-btn" onclick="setTopic('${tp}')">${tp}</button>`;
  });
  document.getElementById("topicButtons").innerHTML = btns;
}

function setTopic(tp){
  chosenTopic = tp;
  alert("Topic selected: " + tp);
  // Update AI Chat Display
  document.getElementById('chatTopicDisplay').innerText = chosenTopic;
  // Clear any previous chat content and reset for the new topic
  const chatOutput = document.getElementById('aiChatOutput');
  chatOutput.innerHTML = '<div class="ai-message">Hi there! Select a topic in the **Subjects** tab to start learning.</div>';
  setupAIChat(); // Load default message for new topic
}

/* ===================== LOAD MINDMAP (MODIFIED FOR BUBBLES) ===================== */
function loadMindmap(){
  const out = document.getElementById("mmOutput");
  if(!chosenTopic){ out.innerHTML = "Select a topic first!"; return; }
  const mmData = mmBank[chosenTopic];
  if(!mmData){ out.innerHTML = "Mindmap not available."; return; }
  
  let html = `<h3>${chosenTopic} - Key Concepts</h3><div class="mm-bubble-container">`;
  
  // Center node for effect (optional, but good for visual hierarchy)
  html += `<div class="mm-bubble" style="background:#1346b5; transform:scale(1.1);">**${chosenTopic.toUpperCase()}**</div>`;
  
  mmData.forEach(item => html += `<div class="mm-bubble">${item}</div>`);
  html += "</div>";
  out.innerHTML = html;
}

/* ===================== LOAD QUIZ (MODIFIED FOR SUBMISSION LOGIC) ===================== */
function loadQuiz(){
  const out = document.getElementById("quizOutput");
  document.getElementById("quizTopicTitle").innerText = chosenTopic || "(Topic Not Selected)";

  if(!chosenTopic){ out.innerHTML = "Select a topic first!"; return; }

  const q = quizBankMCQ[chosenTopic];
  if(!q){ out.innerHTML = "Multiple-choice Quiz not available for this topic."; return; }

  let html = `<form id="quizForm">`;
  q.forEach((question, index) => {
    html += `<div class="quiz-question" data-question-index="${index}">`;
    html += `<p>${index + 1}. ${question.q}</p>`;
    question.options.forEach((option, optIndex) => {
      // Use index for unique ID and name
      html += `<label for="q${index}o${optIndex}">
                <input type="radio" id="q${index}o${optIndex}" name="q${index}" value="${option}">
                ${option}
               </label>`;
    });
    html += `</div>`;
  });
  html += `<button type="button" id="submitQuizBtn" onclick="submitQuiz()">Submit Quiz</button>`;
  html += `<div id="quizResult"></div>`;
  html += `</form>`;

  out.innerHTML = html;
}

function submitQuiz() {
  const form = document.getElementById('quizForm');
  const questions = quizBankMCQ[chosenTopic];
  const resultDiv = document.getElementById('quizResult');
  let correctCount = 0;
  let totalCount = questions.length;
  
  // Reset previous feedback
  document.querySelectorAll('.quiz-question label').forEach(label => {
    label.classList.remove('correct', 'incorrect');
  });

  questions.forEach((qData, index) => {
    const questionDiv = document.querySelector(`.quiz-question[data-question-index="${index}"]`);
    const radios = questionDiv.querySelectorAll(`input[type="radio"][name="q${index}"]`);
    let selectedAnswer = null;
    let isCorrect = false;

    // 1. Find the selected answer and mark feedback
    radios.forEach(radio => {
      const label = radio.closest('label');
      // Always show the correct answer
      if (radio.value === qData.a) {
        label.classList.add('correct');
      }
      
      if (radio.checked) {
        selectedAnswer = radio.value;
        if (selectedAnswer === qData.a) {
          isCorrect = true;
          correctCount++;
        } else {
          // If selected but incorrect, mark it red
          label.classList.add('incorrect');
        }
      }
      
      // Disable inputs after submission
      radio.disabled = true;
    });
  });
  
  // Disable the submit button
  document.getElementById('submitQuizBtn').disabled = true;
  document.getElementById('submitQuizBtn').innerText = "Quiz Submitted";


  // 2. Display final score
  resultDiv.innerHTML = `‚úÖ You scored **${correctCount}** out of **${totalCount}**!`;
}

/* ===================== LOAD WORKSHEET ===================== */
function loadWorksheet(){
  const out = document.getElementById("wsOutput");
  const w = wsBank[chosenTopic];
  if(!w){ out.innerHTML = "Worksheet not available for this topic."; return; }
  out.innerHTML = w.map((s, index) => `<p>${index + 1}. ${s}</p>`).join("");
}

/* ===================== AI CHAT (MODIFIED FOR DEFAULT ANSWERS) ===================== */
function setupAIChat() {
  const out = document.getElementById('aiChatOutput');
  const userInput = document.getElementById('userInput');
  const sendBtn = document.getElementById('sendBtn');
  document.getElementById('chatTopicDisplay').innerText = chosenTopic || "(No Topic Selected)";

  // Display initial message for the selected topic
  if (chosenTopic && out.children.length <= 1) { // Only add if chat is empty or has only the welcome message
    const defaultResponse = aiChatBank[chosenTopic] || ["I am ready to help you with this topic! Try asking 'What is X?' or 'Give me an example of Y.'"];
    const topicMessage = `I see you selected **${chosenTopic}**. Here are some key points to start:`;
    let html = `<div class="ai-message">${topicMessage}<ul>`;
    defaultResponse.forEach(point => {
      html += `<li>${point}</li>`;
    });
    html += `</ul></div>`;
    out.innerHTML += html;
    out.scrollTop = out.scrollHeight;
  }

  // Remove existing event listeners to prevent duplicates
  sendBtn.onclick = null;
  userInput.onkeypress = null;

  // Set new event listeners
  sendBtn.onclick = handleChat;
  userInput.onkeypress = function(e) {
    if (e.key === 'Enter') {
      handleChat();
    }
  };
}

function handleChat() {
  const userInput = document.getElementById('userInput');
  const out = document.getElementById('aiChatOutput');
  const userText = userInput.value.trim();

  if (userText === '') return;

  // Display user message
  out.innerHTML += `<div class="user-message">You: ${userText}</div>`;
  userInput.value = ''; // Clear input immediately

  // Scroll to bottom
  out.scrollTop = out.scrollHeight;

  // Process and generate AI response
  const lowerCaseText = userText.toLowerCase();
  let aiResponse = `I can only discuss the key concepts of **${chosenTopic || "your selected topic"}**. Please ask about a specific point from the Mind Map, such as **${mmBank[chosenTopic]?.[0].split(':')[0].trim() || 'the main idea'}**.`;

  if (!chosenTopic) {
    aiResponse = "Please select a **Topic** in the **Subjects** tab before using the AI Chat.";
  } else {
    const mindMapData = mmBank[chosenTopic];

    // --- Specific Keyword Matching (More robust default answers) ---

    // 1. Definition/Explanation Queries
    if (lowerCaseText.includes("what is") || lowerCaseText.includes("define") || lowerCaseText.includes("meaning of") || lowerCaseText.includes("explain")) {
      const parts = lowerCaseText.split(/what is|define|meaning of|explain/);
      let keyword = parts[parts.length - 1].trim().replace(/\?|\.|the|a|in|for/g, '').trim();
      
      let found = false;
      for (const point of mindMapData) {
        if (point.toLowerCase().includes(keyword) || keyword.includes(point.toLowerCase().split(':')[0].trim())) {
          aiResponse = `Regarding **${keyword}** in **${chosenTopic}**: ${point}`;
          found = true;
          break;
        }
      }
      if (!found) {
        aiResponse = `I found no direct definition for **${keyword}** in the key concepts of **${chosenTopic}**. Try asking about one of the main Mind Map points.`;
      }
    } 
    // 2. Summary/Overview Queries
    else if (lowerCaseText.includes("tell me about") || lowerCaseText.includes("summary") || lowerCaseText.includes("overview")) {
      aiResponse = `Here is a summary of the key points for **${chosenTopic}**:\n<ul>${mindMapData.map(p => `<li>${p}</li>`).join('')}</ul>`;
    } 
    // 3. Examples/Facts Queries (Simple fallbacks)
    else if (lowerCaseText.includes("example") || lowerCaseText.includes("fact") || lowerCaseText.includes("give me")) {
      aiResponse = `One key fact about **${chosenTopic}** is: **${mindMapData[1] || mindMapData[0]}**.`;
    }
    // 4. Greetings
    else if (lowerCaseText.includes("hello") || lowerCaseText.includes("hi")) {
      aiResponse = `Hello! I'm ready to help you learn about **${chosenTopic}**. What question do you have?`;
    } 
    // 5. Thanks
    else if (lowerCaseText.includes("thank") || lowerCaseText.includes("bye")) {
      aiResponse = "You're welcome! Feel free to ask another question or start a quiz when you're ready. Have a good day!";
    }
  }

  // Display AI response
  setTimeout(() => {
    out.innerHTML += `<div class="ai-message">AI: ${aiResponse}</div>`;
    out.scrollTop = out.scrollHeight; // Scroll to the bottom again
  }, 500); // Small delay for effect
}

</script>

<script>
/* ===================== MINDMAP DATA ===================== */
// (Data remains unchanged, but is used by the modified loadMindmap/handleChat functions)

const mmBank = {
"Grammar": [
  "Grammar is the structure and system of a language.",
  "Includes parts of speech: nouns, pronouns, verbs, adjectives, adverbs.",
  "Sentence structure: subject, predicate, clauses.",
  "Tenses show the time of action.",
  "Punctuation ensures clarity in writing."
],
"Formal Letter": [
  "Written for official purposes.",
  "Format: Sender‚Äôs address ‚Üí Date ‚Üí Receiver‚Äôs address ‚Üí Subject ‚Üí Salutation.",
  "Body has 3 paragraphs: introduction, details, conclusion.",
  "Formal tone, no slang.",
  "Ends with 'Yours sincerely' + name."
],
"Speech": [
  "A spoken expression delivered to an audience.",
  "Structure: introduction, body points, conclusion.",
  "Use clear language and strong opening.",
  "Maintain eye contact & voice modulation.",
  "Ends with a memorable closing statement."
],
"Prose": [
  "Written in ordinary grammatical structure.",
  "Contains paragraphs instead of verses.",
  "Includes narratives, essays, stories.",
  "Focuses on characters, storyline, message.",
  "Uses natural speech flow."
],

/* Math */
"Algebra": [
  "Deals with letters & symbols representing numbers (variables).",
  "Expressions: combination of variables, constants, operators.",
  "Equations: expressions with equality sign (e.g., x + 5 = 10).",
  "Solve by isolating the variable.",
  "Used in real-life calculations."
],
"Linear Equations": [
  "Equation of form ax + b = 0, where variables have a degree of 1.",
  "Solution found by balancing both sides.",
  "Graph of a linear equation is a straight line.",
  "Variables usually of degree 1.",
  "Used in cost calculations & daily math."
],
"Mensuration": [
  "Study of areas & volumes.",
  "2D shapes: square, rectangle, triangle, circle.",
  "3D shapes: cube, cuboid, cylinder, cone.",
  "Requires formulas for perimeter & area.",
  "Used in construction & measurements."
],

/* Science */
"Reproduction in Animals": [
  "Process by which living organisms produce offspring.",
  "Types: sexual (with gametes) & asexual (single parent) reproduction.",
  "Fertilisation: fusion of male & female gametes.",
  "Viviparous = give birth to young; Oviparous = lay eggs.",
  "Zygote develops into an embryo."
],
"Sound": [
  "Sound is produced by vibrations.",
  "Travels in form of waves.",
  "Requires a medium (solid, liquid, or gas) to propagate.",
  "Frequency determines pitch (high frequency = high pitch).",
  "Amplitude determines loudness (large amplitude = loud sound)."
],
"Electricity": [
  "Flow of electric current through circuits.",
  "Conductors allow current flow; Insulators resist flow.",
  "A battery provides potential difference (voltage).",
  "Switch opens/closes the circuit.",
  "Electric fuse protects appliances from excessive current."
],

/* Social Science */
"1857 Revolt": [
  "First major rebellion against British rule in India.",
  "Causes: political, economic, military & cultural (like the greased cartridges).",
  "Leaders: Rani Lakshmibai, Mangal Pandey, Bahadur Shah Zafar.",
  "Widespread anger united Indians.",
  "Resulted in the end of the British East India Company rule."
],
"Resources": [
  "Anything useful to humans that satisfies a need.",
  "Types: natural, human-made, human resources.",
  "Renewable (replenished quickly) vs Non-renewable (limited supply).",
  "Conservation is essential for future use.",
  "Sustainable use ensures future security."
],
"Judiciary": [
  "Interprets laws & ensures justice.",
  "Structure: Supreme Court (apex) ‚Üí High Courts ‚Üí District Courts.",
  "It is independent of the Legislature & Executive branches.",
  "Protects fundamental rights of citizens.",
  "Provides dispute resolution."
],

/* Hindi */
"Vyakaran": [
  "Refers to Hindi grammar rules (‡§µ‡•ç‡§Ø‡§æ‡§ï‡§∞‡§£).",
  "Includes Sangya (Noun), Sarvanaam (Pronoun), Kriya (Verb), Visheshan (Adjective).",
  "Covers Vakya ke bhed (Sentence types) & Sandhi (Joining words).",
  "The linguistic structure of Hindi.",
  "Improves clarity & correctness of the language."
],
"Patra Lekhan": [
  "Letter writing format in Hindi.",
  "Two main types: Anaupcharik (Informal) & Aupcharik (Formal).",
  "Includes address, date, and salutation (‡§∏‡§Ç‡§¨‡•ã‡§ß‡§®).",
  "Body should be clear & respectful.",
  "Ends with signature."
],

/* Computer */
"HTML": [
  "HyperText Markup Language, the standard language for web pages.",
  "Used to structure content on websites.",
  "Elements: <html>, <body>, <h1>, <p>.",
  "Tags can be nested inside one another.",
  "Browsers read and display HTML content."
],
"AI Basics": [
  "AI = machines mimicking human intelligence to perform tasks.",
  "Examples: chatbots, recommendation systems, prediction systems.",
  "Machine learning trains models using data to improve performance.",
  "Used in games, smart assistants, self-driving cars.",
  "Future technology advancing rapidly."
],

/* Sanskrit */
"Shabd Roop": [
  "Forms of nouns in Sanskrit (‡§∂‡§¨‡•ç‡§¶ ‡§∞‡•Ç‡§™).",
  "Based on gender (‡§≤‡§ø‡§Ç‡§ó), vibhakti (case) & vachana (number).",
  "Examples: ‡§∞‡§æ‡§Æ‡§É, ‡§∞‡§æ‡§Æ‡§Æ‡•ç, ‡§∞‡§æ‡§Æ‡•á‡§£.",
  "Memorisation improves Sanskrit translation and understanding.",
  "Used for correct sentence structure."
],
"Dhatu Roop": [
  "Verb forms in Sanskrit (‡§ß‡§æ‡§§‡•Å ‡§∞‡•Ç‡§™).",
  "Shows tense (‡§≤‡§ï‡§æ‡§∞), number, & person (‡§™‡•Å‡§∞‡•Å‡§∑).",
  "Example: ‡§™‡§†‡§§‡§ø, ‡§™‡§†‡§§‡§É, ‡§™‡§†‡§®‡•ç‡§§‡§ø.",
  "Different lakaras: Lat (Present), Lang (Past), Lot (Imperative).",
  "Essential for correct verb agreement in sentences."
],

/* French */
"French Grammar": [
  "Basic rules of French language.",
  "Articles: le (masculine singular), la (feminine singular), les (plural).",
  "Key Verbs: √™tre (to be) and avoir (to have).",
  "Standard Sentence structure = Subject + Verb + Object.",
  "All French nouns have genders (masculine or feminine)."
],
"Culture": [
  "French traditions & lifestyle.",
  "Popular foods: croissants, baguettes, cheese.",
  "Eiffel Tower in Paris symbolises France.",
  "Rich history in art & literature.",
  "French is spoken in 29 countries worldwide."
]
};


/* ===================== QUIZ BANK (MODIFIED FOR MCQs) ===================== */

const quizBankMCQ = {
"Grammar": [
{ q: "Which of the following is a noun?", options: ["Quickly", "Jump", "Happiness", "Run"], a: "Happiness" },
{ q: "Identify the verb in the sentence: 'The cat slept soundly.'", options: ["The", "cat", "slept", "soundly"], a: "slept" },
{ q: "What part of speech modifies a verb, adjective, or another adverb?", options: ["Noun", "Adverb", "Pronoun", "Preposition"], a: "Adverb" },
{ q: "The word 'She' is an example of a:", options: ["Noun", "Verb", "Adjective", "Pronoun"], a: "Pronoun" },
{ q: "Which punctuation mark is used to separate items in a list?", options: [".", "?", ",", "!"], a: "," },
],

"Formal Letter": [
{ q: "What should be placed directly below the Sender‚Äôs Address?", options: ["Salutation", "Subject", "Date", "Body"], a: "Date" },
{ q: "What tone must a formal letter maintain?", options: ["Casual", "Humorous", "Sarcastic", "Formal"], a: "Formal" },
{ q: "Which closing phrase is typically used in a formal letter?", options: ["Best wishes", "Yours sincerely", "See you soon", "Love"], a: "Yours sincerely" },
{ q: "How many main paragraphs does the body of a formal letter usually have?", options: ["One", "Two", "Three", "Four"], a: "Three" },
{ q: "What is the purpose of the Subject line?", options: ["To greet the reader", "To introduce the sender", "To state the main reason for the letter", "To provide contact details"], a: "To state the main reason for the letter" }
],

"Algebra": [
{ q: "In the expression $5x + 3$, $x$ is the:", options: ["Coefficient", "Constant", "Variable", "Operator"], a: "Variable" },
{ q: "Simplify the expression: $4a + 2a - a$.", options: ["$5a$", "$6a$", "$3a$", "$4a^2$"], a: "$5a$" },
{ q: "Solve for $x$: $x - 7 = 15$.", options: ["$x = 8$", "$x = 22$", "$x = 105$", "$x = 7$"], a: "$x = 22$" },
{ q: "What is the result of expanding $(y+4)(y-4)$?", options: ["$y^2 + 16$", "$y^2 - 16$", "$2y$", "$y^2 + 8y + 16$"], a: "$y^2 - 16$" },
{ q: "What is a number multiplied by a variable called?", options: ["Exponent", "Constant", "Term", "Coefficient"], a: "Coefficient" }
],

"Reproduction in Animals": [
{ q: "The process of producing offspring is called:", options: ["Respiration", "Digestion", "Reproduction", "Excretion"], a: "Reproduction" },
{ q: "What is the fusion of male and female gametes called?", options: ["Zygote formation", "Embryo development", "Fertilisation", "Budding"], a: "Fertilisation" },
{ q: "Animals that lay eggs are known as:", options: ["Viviparous", "Mammals", "Amphibious", "Oviparous"], a: "Oviparous" },
{ q: "Which of the following is a type of asexual reproduction?", options: ["Binary Fission", "Internal Fertilisation", "Oviparity", "Sexual Reproduction"], a: "Binary Fission" },
{ q: "The fertilised egg is also known as a:", options: ["Embryo", "Foetus", "Zygote", "Gamete"], a: "Zygote" }
],

"Electricity": [
{ q: "The flow of electric charge is called:", options: ["Resistance", "Voltage", "Current", "Power"], a: "Current" },
{ q: "A material that allows electric current to flow through it easily is a:", options: ["Insulator", "Resistor", "Conductor", "Semiconductor"], a: "Conductor" },
{ q: "What provides the potential difference (voltage) in a circuit?", options: ["Wire", "Switch", "Bulb", "Battery/Cell"], a: "Battery/Cell" },
{ q: "A device used to break or complete an electric circuit is a:", options: ["Fuse", "Ammeter", "Switch", "Filament"], a: "Switch" },
{ q: "What is the main function of an electric fuse?", options: ["To increase current", "To measure voltage", "To protect appliances from excessive current", "To store electricity"], a: "To protect appliances from excessive current" }
],

"HTML": [
{ q: "What does HTML stand for?", options: ["Hyper Text Makeup Language", "Hyper Text Markup Language", "Home Tool Markup Language", "Hyperlink and Text Markup Language"], a: "Hyper Text Markup Language" },
{ q: "Which tag defines the main content of the HTML document?", options: ["<head>", "<title>", "<body>", "<html>"], a: "<body>" },
{ q: "Which tag is used to create a large heading?", options: ["<h1-h6>", "<header>", "<h1>", "<heading>"], a: "<h1>" },
{ q: "Which of the following is an example of an empty tag?", options: ["<p>", "<a>", "<br>", "<body>"], a: "<br>" },
{ q: "What are the structural components of an HTML page, enclosed in angle brackets (< >), called?", options: ["Elements", "Attributes", "Tags", "Pointers"], a: "Tags" }
],

"Vyakaran": [
{ q: "‡§∏‡§Ç‡§ú‡•ç‡§û‡§æ ‡§ï‡§ø‡§∏‡•á ‡§ï‡§π‡§§‡•á ‡§π‡•à‡§Ç?", options: ["‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ", "‡§∏‡§∞‡•ç‡§µ‡§®‡§æ‡§Æ ‡§ï‡§æ ‡§®‡§æ‡§Æ", "‡§ï‡§ø‡§∏‡•Ä ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø, ‡§µ‡§∏‡•ç‡§§‡•Å ‡§Ø‡§æ ‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡§æ ‡§®‡§æ‡§Æ", "‡§µ‡§ø‡§∂‡•á‡§∑‡§£"], a: "‡§ï‡§ø‡§∏‡•Ä ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø, ‡§µ‡§∏‡•ç‡§§‡•Å ‡§Ø‡§æ ‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡§æ ‡§®‡§æ‡§Æ" },
{ q: "‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§ï‡•á ‡§≠‡•á‡§¶ ‡§ï‡§ø‡§§‡§®‡•á ‡§π‡•à‡§Ç?", options: ["‡§è‡§ï", "‡§¶‡•ã", "‡§§‡•Ä‡§®", "‡§ö‡§æ‡§∞"], a: "‡§¶‡•ã" },
{ q: "‡§µ‡§π (‡§µ‡§π) ‡§ï‡§ø‡§∏ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡§æ ‡§∏‡§∞‡•ç‡§µ‡§®‡§æ‡§Æ ‡§π‡•à?", options: ["‡§®‡§ø‡§ú‡§µ‡§æ‡§ö‡§ï", "‡§™‡•Å‡§∞‡•Å‡§∑‡§µ‡§æ‡§ö‡§ï", "‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§µ‡§æ‡§ö‡§ï", "‡§®‡§ø‡§∂‡•ç‡§ö‡§Ø‡§µ‡§æ‡§ö‡§ï"], a: "‡§™‡•Å‡§∞‡•Å‡§∑‡§µ‡§æ‡§ö‡§ï" },
{ q: "‡§µ‡§ø‡§∂‡•á‡§∑‡§£ ‡§ï‡•ç‡§Ø‡§æ ‡§¨‡§§‡§æ‡§§‡§æ ‡§π‡•à?", options: ["‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ", "‡§∏‡§Ç‡§ú‡•ç‡§û‡§æ ‡§ï‡•Ä ‡§µ‡§ø‡§∂‡•á‡§∑‡§§‡§æ", "‡§∏‡§Æ‡§Ø", "‡§∏‡•ç‡§•‡§æ‡§®"], a: "‡§∏‡§Ç‡§ú‡•ç‡§û‡§æ ‡§ï‡•Ä ‡§µ‡§ø‡§∂‡•á‡§∑‡§§‡§æ" },
{ q: "‡§µ‡§∞‡•ç‡§§‡§®‡•Ä ‡§ï‡•Ä ‡§∂‡•Å‡§¶‡•ç‡§ß‡§§‡§æ ‡§ï‡•ç‡§Ø‡•ã‡§Ç ‡§ú‡§º‡§∞‡•Ç‡§∞‡•Ä ‡§π‡•à?", options: ["‡§∏‡•Å‡§Ç‡§¶‡§∞ ‡§≤‡§ø‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è", "‡§≤‡§ø‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è", "‡§™‡§¢‡§º‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è", "‡§Ö‡§∞‡•ç‡§• ‡§ï‡•Ä ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü‡§§‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è"], a: "‡§Ö‡§∞‡•ç‡§• ‡§ï‡•Ä ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü‡§§‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è" }
],

"1857 Revolt": [
{ q: "The 1857 Revolt is also known as:", options: ["The Sepoy Mutiny", "The Great War", "The Bengal Famine", "The Quit India Movement"], a: "The Sepoy Mutiny" },
{ q: "Who was a prominent leader of the revolt from Jhansi?", options: ["Nana Saheb", "Tantia Tope", "Rani Lakshmibai", "Begum Hazrat Mahal"], a: "Rani Lakshmibai" },
{ q: "What was the immediate cause often cited for the start of the revolt?", options: ["Economic policies", "Political annexations", "Social reforms", "Greased cartridges rumour"], a: "Greased cartridges rumour" },
{ q: "What major change occurred in India's administration after the revolt?", options: ["Transfer of power to the Indian National Congress", "Transfer of power from the East India Company to the British Crown", "End of British rule", "Establishment of the Governor-General position"], a: "Transfer of power from the East India Company to the British Crown" },
{ q: "Who was the Mughal Emperor proclaimed as the leader of the rebels?", options: ["Akbar II", "Shah Alam II", "Bahadur Shah Zafar", "Jahangir"], a: "Bahadur Shah Zafar" }
]
// Add more quiz data here for all topics in subjectTopics if needed
};


/* ===================== WORKSHEET BANK (UNCHANGED) ===================== */

const wsBank = {
"Grammar": [
"1. Write 5 nouns.",
"2. Write 5 verbs.",
"3. Identify parts of speech in sentence.",
"4. Form 5 adverbs.",
"5. Write 3 complex sentences."
],
"Formal Letter": [
"1. Write a letter to principal for leave.",
"2. Write subject for complaint letter.",
"3. Write introduction paragraph.",
"4. Write a conclusion line.",
"5. Write receiver address."
],
"Speech": [
"1. Write opening line for speech.",
"2. Write 3 body points.",
"3. Write concluding line.",
"4. Topic: importance of studies.",
"5. Write rhetorical question."
],
"Prose": [
"1. Define prose.",
"2. Write a paragraph on school.",
"3. Identify story elements.",
"4. Write character description.",
"5. Write moral of story."
],
"Algebra": [
"1. Simplify: 3x + x.",
"2. Solve: 2x = 12.",
"3. Expand (x+2)¬≤.",
"4. Define variable & constant.",
"5. Write 3 algebraic expressions."
],
"Linear Equations": [
"1. Solve x + 3 = 9.",
"2. Solve 4x = 16.",
"3. Solve 2x - 5 = 9.",
"4. Write linear equation.",
"5. Graph a straight line."
],
"Mensuration": [
"1. Find area of square 5 cm.",
"2. Find area of 6√ó4 rectangle.",
"3. Find perimeter of triangle.",
"4. Define radius & diameter.",
"5. Find volume of cube side 3."
],
"Reproduction in Animals": [
"1. Define fertilisation.",
"2. Draw male & female gametes.",
"3. Difference between internal & external fertilisation.",
"4. Example of oviparous animal.",
"5. Define embryo."
],
"Sound": [
"1. Define vibration.",
"2. Draw wave diagram.",
"3. Define frequency.",
"4. Define amplitude.",
"5. Explain echo."
],
"Electricity": [
"1. Draw simple circuit.",
"2. Label battery & bulb.",
"3. Define conductor.",
"4. Define insulator.",
"5. What is fuse?"
],
"1857 Revolt": [
"1. Causes of revolt.",
"2. Leaders of revolt.",
"3. Immediate cause.",
"4. Effects of revolt.",
"5. Write short note."
],
"Resources": [
"1. Define resource.",
"2. Types of resources.",
"3. Renewable vs non-renewable.",
"4. Conservation methods.",
"5. Why resources important?"
],
"Judiciary": [
"1. Structure of courts.",
"2. Define PIL.",
"3. Role of Supreme Court.",
"4. Rights protected?",
"5. Why judiciary independent?"
],
"Vyakaran": [
"1. Sangya ke prakar.",
"2. Kriya ke 5 udaharan.",
"3. Visheshan likhiye.",
"4. Vakya banao.",
"5. Muhavare likhiye."
],
"Patra Lekhan": [
"1. Patra ka format.",
"2. Patra ke bhaag.",
"3. Sambodhan likhiye.",
"4. Samapan likhiye.",
"5. Formal patra likhiye."
],
"HTML": [
"1. Write HTML structure.",
"2. Use <h1> <p> tags.",
"3. Make a list.",
"4. Insert image.",
"5. Create link."
],
"AI Basics": [
"1. Define AI.",
"2. Uses of AI.",
"3. ML kya hai?",
"4. Chatbot example.",
"5. AI ke benefits."
],
"Shabd Roop": [
"1. Ram shabd roop.",
"2. Hari shabd roop.",
"3. Vibhakti table.",
"4. Striling examples.",
"5. Vakya banao."
],
"Dhatu Roop": [
"1. Path dhatu roop.",
"2. Lakar likhiye.",
"3. Verb forms.",
"4. Translation.",
"5. Kriya likhiye."
],
"French Grammar": [
"1. Write 5 French nouns.",
"2. Conjugate √™tre.",
"3. Conjugate avoir.",
"4. Write 5 adjectives.",
"5. Translate sentences."
],
"Culture": [
"1. Write about France.",
"2. French food.",
"3. French monuments.",
"4. French festivals.",
"5. French lifestyle."
]
};

/* ===================== AI CHAT DEFAULT ANSWERS (UNCHANGED, USES mmBank) ===================== */
const aiChatBank = mmBank;
</script>

</body>
</html>
